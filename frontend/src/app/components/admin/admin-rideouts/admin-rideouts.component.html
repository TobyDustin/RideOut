<app-admin-nav>
  <div class="control">
    <button
      mat-raised-button
      color="primary"
      (click)="openDialog()">
      Add RideOut
    </button>
  </div>
  <div class="rideouts">
    <h2>Manage RideOuts</h2>
    <table
      *ngIf="rideOuts != null"
      mat-table
      [dataSource]="rideOuts"
      class="mat-elevation-z8 table">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let rideOut"> {{ rideOut.name }} </td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef> Type </th>
        <td mat-cell *matCellDef="let rideOut"> {{ rideOut.rideoutType }} </td>
      </ng-container>

      <ng-container matColumnDef="dateStart">
        <th mat-header-cell *matHeaderCellDef> Start </th>
        <td mat-cell *matCellDef="let rideOut"> {{ rideOut.dateStart | date:'shortDate' }} </td>
      </ng-container>

      <ng-container matColumnDef="dateEnd">
        <th mat-header-cell *matHeaderCellDef> End </th>
        <td mat-cell *matCellDef="let rideOut"> {{ rideOut.dateEnd | date:'shortDate' }} </td>
      </ng-container>

      <ng-container matColumnDef="riders">
        <th mat-header-cell *matHeaderCellDef> Riders </th>
        <td mat-cell *matCellDef="let rideOut"> {{ rideOut.riders?.length || 0 }}/{{ rideOut.maxRiders || 0 }} </td>
      </ng-container>

      <ng-container matColumnDef="checkpoints">
        <th mat-header-cell *matHeaderCellDef> Checkpoints </th>
        <td mat-cell *matCellDef="let rideOut"> {{ rideOut.checkpoints?.length || 0 }} </td>
      </ng-container>

      <ng-container matColumnDef="travelBookings">
        <th mat-header-cell *matHeaderCellDef> Travel </th>
        <td mat-cell *matCellDef="let rideOut">
          {{ (rideOut.rideoutType == "Tour") ? (rideOut.travelBookings?.length || 0) : "-" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="accommodationBookings">
        <th mat-header-cell *matHeaderCellDef> Accommodation </th>
        <td mat-cell *matCellDef="let rideOut">
          {{ (rideOut.rideoutType == "Stay" || rideOut.rideoutType == "Tour") ? (rideOut.accommodationBookings?.length || 0) : "-" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="restaurant">
        <th mat-header-cell *matHeaderCellDef> Restaurant </th>
        <td mat-cell *matCellDef="let rideOut"> {{ rideOut.restaurantBookings?.length || 0 }} </td>
      </ng-container>

      <ng-container matColumnDef="published">
        <th mat-header-cell *matHeaderCellDef> Published </th>
        <td mat-cell *matCellDef="let rideOut"> {{ rideOut.published ? "Yes" : "No" }} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let rideOut; columns: displayedColumns;"></tr>

    </table>
  </div>
</app-admin-nav>
